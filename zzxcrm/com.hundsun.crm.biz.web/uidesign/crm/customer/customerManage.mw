<?xml version="1.0" encoding="UTF-8"?>

<hsdoc version="1.1.0">
  <Windows>
    <control-MainWindow height="468" name="MainWin" templatePath="window.ftl" width="1103">
      <layout-fit>
        <control-Panel height="200" name="Panel1" width="300">
          <layout-border>
            <control-Panel region="center" border="false" height="200" name="Panel2" width="300">
              <layout-border>
                <control-Grid hasCheckColumn="true" region="center" remoteSort="true" enableCellTip="true" width="300" height="169" dataSet="DataSet1" name="Grid1" hasCustomPageSize="true" border="false" hasPagingBar="true">
                  <layout-GridToolbar>
                    <control-GridItem title="名称" align="left" dataIndex="custName" name="GridItem2" width="243"/>
                    <control-GridItem title="类型" align="left" dataIndex="custType" name="GridItem9" width="138" sortable="true"/>
                    <control-GridItem title="行业" align="center" dataIndex="age" name="GridItem5" width="116" sortable="true"/>
                    <control-GridItem title="电话" align="center" dataIndex="custTel" name="GridItem8" width="121"/>
                    <control-GridItem title="客户属性" align="left" name="GridItem1" sortable="true" width="140"/>
                    <control-GridItem title="回款总金额" align="left" name="GridItem3" sortable="true" width="100"/>
                    <control-GridItem title="订单总金额" align="left" name="GridItem4" sortable="true" width="118"/>
                    <control-GridItem title="所有者" align="left" dataIndex="custChieftain" name="GridItem6" sortable="true" width="121"/>
                  </layout-GridToolbar>
                </control-Grid>
                <control-FormPanel collapseMode="mini" region="north" width="300" height="77" hideCollapseTool="true" collapsible="true" split="true" name="FormPanel1" border="false" submitService="bizframe.authority.user.queryUser">
                  <Top/>
                  <Bottom>
                    <control-Toolbar name="Toolbar9">
                      <layout-toolbar>
                        <control-Button name="addUser_btn" text="新增" width="75" icon="bizframe/images/icons/add.gif" tabIndex="10"/>
                        <control-Button name="editUser_btn" text="修改" width="75" icon="bizframe/images/icons/edit.png" tabIndex="11"/>
                        <control-Button name="delUser_btn" text="删除" width="75" icon="bizframe/images/icons/delete.gif" tabIndex="12"/>
                        <control-Button name="Button1" text="信息查看" width="75" icon="bizframe/images/icons/user.gif" tabIndex="18"/>
                        <control-Button name="Button2" displayModeRender="hidden" text="共享" width="75" tabIndex="88" icon="bizframe/images/icons/branchAllot.png"/>
                        <control-Button name="Button3" displayModeRender="hidden" text="分配" width="75" tabIndex="89" icon="bizframe/images//bizSetOffice.png"/>
                        <control-Button name="Button4" displayModeRender="hidden" text="导入" width="75" tabIndex="90" icon="bizframe/images/icons/export.png"/>
                        <control-ExcelDownLoadButton width="75" fileName="customerList" icon="bizframe/images/icons/download.png" downloadGridName="Grid1" name="ExcelDownLoadButton1" displayModeRender="hidden" text="全部导出" tabIndex="91" isDownLoadAll="true"/>
                        <control-ExcelDownLoadButton width="75" fileName="customerCurrPageList" icon="bizframe/images/icons/currentPageDownload.png" downloadGridName="Grid1" name="ExcelDownLoadButton2" displayModeRender="hidden" text="当页导出" tabIndex="92"/>
                      </layout-toolbar>
                    </control-Toolbar>
                  </Bottom>
                  <Left/>
                  <Right/>
                  <layout-table columns="4" fullWidth="true">
                    <control-TextField labelAlign="right" msgTarget="qtip" labelWidth="60" fieldName="custName" width="22%" height="22" fieldLabel="客户名称" name="custName" tabIndex="5"/>
                    <control-HiddenField fieldName="orgId" name="searchOrgId"/>
                    <control-NumberField labelAlign="right" labelWidth="40" fieldName="custTel" width="22%" height="22" fieldLabel="电话" name="custTel" tabIndex="87"/>
                    <control-Button name="queryUser_btn" text="查询" labelWidth="18" width="75" icon="bizframe/images/icons/search.png" tabIndex="2"/>
                  </layout-table>
                </control-FormPanel>
              </layout-border>
              <Top/>
              <Bottom/>
              <Left/>
              <Right/>
            </control-Panel>
          </layout-border>
          <Top/>
        </control-Panel>
      </layout-fit>
    </control-MainWindow>
    <control-Window width="790" height="397" title="新增客户" maximized="true" name="Window1" resizable="false" autoScroll="true" draggable="true">
      <layout-fit>
        <control-FormPanel width="300" height="200" name="FormPanel2" border="false" autoScroll="true" frame="true" submitService="bizframe.authority.user.insertUser">
          <layout-table columns="2" fullWidth="true">
            <control-TextField labelAlign="right" msgTarget="qtip" labelWidth="150" suffixLabel="&lt;span style=&quot;color:red;&quot;&gt;*&lt;/span&gt;" regexText="非法输入，只能输入英文、数字和下划线" fieldName="userId" width="90.0%" height="22" regex="/^[\w\u4e00-\u9fa5\.\/\,\，\.\。\“\（\）\(\)\-\s]*$/" minLength="1" fieldLabel="名称" maxLength="200" colspan="2" name="name" allowBlank="false" tabIndex="73"/>
            <control-TextField labelAlign="right" msgTarget="qtip" labelWidth="150" suffixLabel="&lt;span style=&quot;color:red;&quot;&gt;*&lt;/span&gt;" regexText="非法输入，只能输入中文、英文、数字和下划线" fieldName="userName" width="30.0%" height="22" regex="/^[\w\u4e00-\u9fa5\.\/\,\，\.\。\“\（\）\(\)\-\s]*$/" minLength="1" fieldLabel="股票代码" maxLength="32" name="UIUserName" allowBlank="false" tabIndex="75"/>
            <control-NumberField dataField="userOrder" labelAlign="right" labelWidth="150" fieldName="age" width="30.0%" height="22" fieldLabel="发票地址" name="UIUserOrder" allowBlank="false"/>
            <control-HiddenField fieldName="orgId" name="addOrgId"/>
            <control-StaticRadioGroup labelAlign="right" labelWidth="150" width="30.0%" height="50" fieldLabel="热点用户" name="StaticRadioGroup1" columns="1" tabIndex="93">
              <layout-GroupLayout>
                <control-Radio inputValue="1" name="Radio1" boxLabel="是" width="30" tabIndex="1"/>
                <control-Radio inputValue="0" name="Radio2" boxLabel="否" width="30" tabIndex="1"/>
              </layout-GroupLayout>
            </control-StaticRadioGroup>
            <control-ComboBox labelAlign="right" labelWidth="150" width="22.0%" height="22" fieldLabel="客户来源" name="ComboBox2" tabIndex="95"/>
            <control-ComboBox labelAlign="right" labelWidth="150" width="22.0%" height="22" fieldLabel="类型" name="ComboBox1" tabIndex="94"/>
            <control-ComboBox labelAlign="right" labelWidth="150" width="22.0%" height="22" fieldLabel="行业" name="ComboBox3" tabIndex="96"/>
            <control-ComboBox labelAlign="right" labelWidth="150" width="22.0%" height="22" fieldLabel="人员规模" name="ComboBox4" tabIndex="97"/>
            <control-TextField labelAlign="right" labelWidth="150" width="22.0%" height="22" fieldLabel="年收入" name="TextField2" tabIndex="98"/>
            <control-ComboBox labelAlign="right" labelWidth="150" width="22.0%" height="22" fieldLabel="注册资金" name="ComboBox5" tabIndex="99"/>
            <control-TextField labelAlign="right" labelWidth="150" width="22.0%" height="22" fieldLabel="电话" name="TextField3" tabIndex="101"/>
            <control-ComboBox labelAlign="right" labelWidth="150" width="22.0%" height="22" fieldLabel="客户状态" name="ComboBox6" tabIndex="100"/>
            <control-TextField labelAlign="right" labelWidth="150" width="22.0%" height="22" fieldLabel="传真" name="TextField5" tabIndex="103"/>
            <control-TextField labelAlign="right" labelWidth="150" width="22.0%" height="22" fieldLabel="网址" name="TextField4" tabIndex="102"/>
            <control-TextField labelAlign="right" labelWidth="150" width="22.0%" height="22" fieldLabel="电子邮件" name="TextField6" tabIndex="104"/>
            <control-ComboBox labelAlign="right" labelWidth="150" width="22.0%" height="22" fieldLabel="国家" name="ComboBox7" tabIndex="105"/>
            <control-ComboBox labelAlign="right" labelWidth="150" width="22.0%" height="22" fieldLabel="省" name="ComboBox8" tabIndex="106"/>
            <control-SpecialComboBox labelAlign="right" labelWidth="150" width="22.0%" height="22" fieldLabel="城市" name="SpecialComboBox1" tabIndex="107"/>
            <control-TextField labelAlign="right" labelWidth="150" width="22.0%" height="22" fieldLabel="邮编" name="TextField7" tabIndex="108"/>
            <control-TextField labelAlign="right" labelWidth="150" width="90.0%" height="22" fieldLabel="地址" colspan="2" name="TextField8" tabIndex="109"/>
            <control-TextArea labelAlign="right" labelWidth="150" width="90.0%" height="60" fieldLabel="描述" colspan="2" name="TextArea1" tabIndex="110"/>
          </layout-table>
        </control-FormPanel>
      </layout-fit>
      <Bottom>
        <control-ButtonGroup name="Toolbar2">
          <layout-buttonGroup>
            <control-Button name="Button8" text="继续添加" width="75" icon="bizframe/images/icons/add2.png" tabIndex="80"/>
            <control-Button name="Button5" text="确定" width="75" icon="bizframe/images/icons/accept.png" tabIndex="81"/>
            <control-Button name="Button7" text="重置" width="75" icon="bizframe/images/icons/refresh.png" tabIndex="82"/>
            <control-Button name="Button6" text="取消" width="75" icon="bizframe/images/icons/cross.gif" tabIndex="83"/>
          </layout-buttonGroup>
        </control-ButtonGroup>
      </Bottom>
    </control-Window>
    <control-Window width="790" height="300" title="修改客户" maximized="true" name="Window2" resizable="false" draggable="true">
      <layout-fit>
        <control-FormPanel height="200" frame="true" submitService="bizframe.authority.user.insertUser" autoScroll="true" name="FormPanel2" width="300">
          <layout-table columns="2" fullWidth="true">
            <control-TextField labelAlign="right" msgTarget="qtip" labelWidth="150" suffixLabel="&lt;span style=&quot;color:red;&quot;&gt;*&lt;/span&gt;" regexText="非法输入，只能输入英文、数字和下划线" fieldName="userId" width="90.0%" height="22" regex="/^[\w\u4e00-\u9fa5\.\/\,\，\.\。\“\（\）\(\)\-\s]*$/" minLength="1" fieldLabel="名称" maxLength="200" colspan="2" name="name" allowBlank="false" tabIndex="73"/>
            <control-TextField labelAlign="right" msgTarget="qtip" labelWidth="150" suffixLabel="&lt;span style=&quot;color:red;&quot;&gt;*&lt;/span&gt;" regexText="非法输入，只能输入中文、英文、数字和下划线" fieldName="userName" width="30.0%" height="22" regex="/^[\w\u4e00-\u9fa5\.\/\,\，\.\。\“\（\）\(\)\-\s]*$/" minLength="1" fieldLabel="股票代码" maxLength="32" name="UIUserName" allowBlank="false" tabIndex="75"/>
            <control-NumberField dataField="userOrder" labelAlign="right" labelWidth="150" fieldName="age" width="30.0%" height="22" fieldLabel="发票地址" name="UIUserOrder" allowBlank="false"/>
            <control-HiddenField fieldName="orgId" name="addOrgId"/>
            <control-StaticRadioGroup labelAlign="right" labelWidth="150" width="30.0%" height="50" fieldLabel="热点用户" name="StaticRadioGroup1" columns="1" tabIndex="93">
              <layout-GroupLayout>
                <control-Radio inputValue="1" name="Radio1" boxLabel="是" width="30" tabIndex="1"/>
                <control-Radio inputValue="0" name="Radio2" boxLabel="否" width="30" tabIndex="1"/>
              </layout-GroupLayout>
            </control-StaticRadioGroup>
            <control-ComboBox labelAlign="right" labelWidth="150" width="22.0%" height="22" fieldLabel="客户来源" name="ComboBox2" tabIndex="95"/>
            <control-ComboBox labelAlign="right" labelWidth="150" width="22.0%" height="22" fieldLabel="类型" name="ComboBox1" tabIndex="94"/>
            <control-ComboBox labelAlign="right" labelWidth="150" width="22.0%" height="22" fieldLabel="行业" name="ComboBox3" tabIndex="96"/>
            <control-ComboBox labelAlign="right" labelWidth="150" width="22.0%" height="22" fieldLabel="人员规模" name="ComboBox4" tabIndex="97"/>
            <control-TextField labelAlign="right" labelWidth="150" width="22.0%" height="22" fieldLabel="年收入" name="TextField2" tabIndex="98"/>
            <control-ComboBox labelAlign="right" labelWidth="150" width="22.0%" height="22" fieldLabel="注册资金" name="ComboBox5" tabIndex="99"/>
            <control-TextField labelAlign="right" labelWidth="150" width="22.0%" height="22" fieldLabel="电话" name="TextField3" tabIndex="101"/>
            <control-ComboBox labelAlign="right" labelWidth="150" width="22.0%" height="22" fieldLabel="客户状态" name="ComboBox6" tabIndex="100"/>
            <control-TextField labelAlign="right" labelWidth="150" width="22.0%" height="22" fieldLabel="传真" name="TextField5" tabIndex="103"/>
            <control-TextField labelAlign="right" labelWidth="150" width="22.0%" height="22" fieldLabel="网址" name="TextField4" tabIndex="102"/>
            <control-TextField labelAlign="right" labelWidth="150" width="22.0%" height="22" fieldLabel="电子邮件" name="TextField6" tabIndex="104"/>
            <control-ComboBox labelAlign="right" labelWidth="150" width="22.0%" height="22" fieldLabel="国家" name="ComboBox7" tabIndex="105"/>
            <control-ComboBox labelAlign="right" labelWidth="150" width="22.0%" height="22" fieldLabel="省" name="ComboBox8" tabIndex="106"/>
            <control-SpecialComboBox labelAlign="right" labelWidth="150" width="22.0%" height="22" fieldLabel="城市" name="SpecialComboBox1" tabIndex="107"/>
            <control-TextField labelAlign="right" labelWidth="150" width="22.0%" height="22" fieldLabel="邮编" name="TextField7" tabIndex="108"/>
            <control-TextField labelAlign="right" labelWidth="150" width="90.0%" height="22" fieldLabel="地址" colspan="2" name="TextField8" tabIndex="109"/>
            <control-TextArea labelAlign="right" labelWidth="150" width="90.0%" height="60" fieldLabel="描述" colspan="2" name="TextArea1" tabIndex="110"/>
          </layout-table>
        </control-FormPanel>
      </layout-fit>
      <Bottom>
        <control-ButtonGroup name="ButtonGroup1">
          <layout-buttonGroup>
            <control-Button name="Button9" text="确定" width="75" icon="bizframe/images/icons/accept.png" tabIndex="70"/>
            <control-Button name="Button7" text="重置" width="75" icon="bizframe/images/icons/refresh.png" tabIndex="71"/>
            <control-Button name="Button10" text="取消" width="75" icon="bizframe/images/icons/cross.gif" tabIndex="72"/>
          </layout-buttonGroup>
        </control-ButtonGroup>
      </Bottom>
    </control-Window>
    <control-Window title="客户信息" maximized="true" name="Window3" width="790">
      <layout-fit>
        <control-FormPanel border="false" height="200" submitService="bizframe.authority.user.insertUser" autoScroll="true" name="FormPanel2" width="300">
          <layout-table columns="2" fullWidth="true">
            <control-LabelField defaultValue="dsfdsfdsfd" labelAlign="right" labelWidth="150" width="50.0%" fieldLabel="名称" colspan="2" name="LabelField1"/>
            <control-LabelField fieldLabel="股票代码" defaultValue="gfgfdsgfdgfdgfdg" labelAlign="right" name="LabelField2" width="50%" labelWidth="150"/>
            <control-LabelField fieldLabel="发票地址" defaultValue="fdsfdsfds" labelAlign="right" name="LabelField3" width="50%" labelWidth="150"/>
            <control-LabelField fieldLabel="热点客户" defaultValue="fdsfdsfdsf" labelAlign="right" name="LabelField5" width="50%" labelWidth="150"/>
            <control-LabelField fieldLabel="客户来源" labelAlign="right" name="LabelField4" width="50%" labelWidth="150"/>
            <control-LabelField fieldLabel="类型" labelAlign="right" name="LabelField6" width="50%" labelWidth="150"/>
            <control-LabelField fieldLabel="行业" labelAlign="right" name="LabelField7" width="50%" labelWidth="150"/>
            <control-LabelField fieldLabel="人员规模" labelAlign="right" name="LabelField8" width="50%" labelWidth="150"/>
            <control-LabelField fieldLabel="年收入" labelAlign="right" name="LabelField9" width="50%" labelWidth="150"/>
            <control-LabelField fieldLabel="注册资金" labelAlign="right" name="LabelField10" width="50%" labelWidth="150"/>
            <control-LabelField fieldLabel="客户状态" labelAlign="right" name="LabelField12" width="50%" labelWidth="150"/>
            <control-LabelField fieldLabel="电话" labelAlign="right" name="LabelField11" width="50%" labelWidth="150"/>
            <control-LabelField fieldLabel="传真" labelAlign="right" name="LabelField14" width="50%" labelWidth="150"/>
            <control-LabelField fieldLabel="网址" labelAlign="right" name="LabelField13" width="50%" labelWidth="150"/>
            <control-LabelField fieldLabel="电子邮件" labelAlign="right" name="LabelField16" width="50%" labelWidth="150"/>
            <control-LabelField fieldLabel="国家" labelAlign="right" name="LabelField17" width="50%" labelWidth="150"/>
            <control-LabelField fieldLabel="省份" labelAlign="right" name="LabelField15" width="50%" labelWidth="150"/>
            <control-LabelField fieldLabel="城市" labelAlign="right" name="LabelField19" width="50%" labelWidth="150"/>
            <control-LabelField fieldLabel="邮编" labelAlign="right" name="LabelField18" width="50%" labelWidth="150"/>
            <control-LabelField fieldLabel="地址" labelAlign="right" colspan="2" name="LabelField20" width="50.0%" labelWidth="150"/>
            <control-LabelField fieldLabel="描述" labelAlign="right" name="LabelField21" width="50.0%" labelWidth="150"/>
          </layout-table>
        </control-FormPanel>
      </layout-fit>
      <Top>
        <control-Toolbar name="Toolbar9">
          <layout-toolbar>
            <control-Button name="addUser_btn" text="新增" width="75" icon="bizframe/images/icons/add.gif" tabIndex="10"/>
            <control-Button name="editUser_btn" text="修改" width="75" icon="bizframe/images/icons/edit.png" tabIndex="11"/>
            <control-Button name="Button2" displayModeRender="hidden" text="共享" width="75" tabIndex="88" icon="bizframe/images/icons/branchAllot.png"/>
            <control-Button name="Button4" displayModeRender="hidden" text="打印" width="75" tabIndex="90" icon="bizframe/images/icons/export.png"/>
          </layout-toolbar>
        </control-Toolbar>
      </Top>
      <Bottom/>
      <Left/>
      <Right/>
    </control-Window>
  </Windows>
  <Accessory>
    <control-DataSet name="DataSet1" service="customer.serviceInterface.cust.findCustomerPage" usingServiceName="true" window="MainWin">
      <params>
        <param name="custName"><![CDATA[]]></param>
        <param name="custTel"><![CDATA[]]></param>
      </params>
      <fields>
        <field name="custName" type="String"/>
        <field name="custTel" type="String"/>
        <field name="custType" type="String"/>
        <field name="custStatus" type="String"/>
        <field name="email" type="String"/>
        <field name="custChieftain" type="String"/>
        <field name="custSource" type="String"/>
      </fields>
    </control-DataSet>
    <control-DataSet name="DataSet3" service="customer.service.cust.findCustomerDetail" usingServiceName="true" window="Window2">
      <params>
        <param name="custId"><![CDATA[]]></param>
        <param name="custNo"><![CDATA[]]></param>
        <param name="custName"><![CDATA[]]></param>
        <param name="stockCode"><![CDATA[]]></param>
        <param name="InvoiceAddress"><![CDATA[]]></param>
        <param name="custHot"><![CDATA[]]></param>
        <param name="custSource"><![CDATA[]]></param>
        <param name="custType"><![CDATA[]]></param>
        <param name="employeeTotal"><![CDATA[]]></param>
        <param name="custRegion"><![CDATA[]]></param>
        <param name="custLevel"><![CDATA[]]></param>
        <param name="custSatisfy"><![CDATA[]]></param>
        <param name="custCredit"><![CDATA[]]></param>
        <param name="country"><![CDATA[]]></param>
        <param name="province"><![CDATA[]]></param>
        <param name="city"><![CDATA[]]></param>
        <param name="custAddr"><![CDATA[]]></param>
        <param name="custZipCode"><![CDATA[]]></param>
        <param name="custTel"><![CDATA[]]></param>
        <param name="custFax"><![CDATA[]]></param>
        <param name="custWebsite"><![CDATA[]]></param>
        <param name="custLicenceNo"><![CDATA[]]></param>
        <param name="custChieftain"><![CDATA[]]></param>
        <param name="custBankroll"><![CDATA[]]></param>
        <param name="custTurnover"><![CDATA[]]></param>
        <param name="custBank"><![CDATA[]]></param>
        <param name="custBankAccount"><![CDATA[]]></param>
        <param name="custLocalTaxNo"><![CDATA[]]></param>
        <param name="custNationalTaxNo"><![CDATA[]]></param>
        <param name="custStatus"><![CDATA[]]></param>
      </params>
      <fields>
        <field name="custId" type="String"/>
        <field name="custNo" type="String"/>
        <field name="custName" type="String"/>
        <field name="stockCode" type="String"/>
        <field name="InvoiceAddress" type="String"/>
        <field name="custHot" type="String"/>
        <field name="custSource" type="String"/>
        <field name="custType" type="String"/>
        <field name="employeeTotal" type="String"/>
        <field name="custRegion" type="String"/>
        <field name="custLevel" type="String"/>
        <field name="custSatisfy" type="String"/>
        <field name="custCredit" type="String"/>
        <field name="country" type="String"/>
        <field name="province" type="String"/>
        <field name="city" type="String"/>
        <field name="custAddr" type="String"/>
        <field name="custZipCode" type="String"/>
        <field name="custTel" type="String"/>
        <field name="custFax" type="String"/>
        <field name="custWebsite" type="String"/>
        <field name="custLicenceNo" type="String"/>
        <field name="custChieftain" type="String"/>
        <field name="custBankroll" type="String"/>
        <field name="custTurnover" type="String"/>
        <field name="custBank" type="String"/>
        <field name="custBankAccount" type="String"/>
        <field name="custLocalTaxNo" type="String"/>
        <field name="custNationalTaxNo" type="String"/>
        <field name="custStatus" type="String"/>
      </fields>
    </control-DataSet>
  </Accessory>
  <WindowScripts>
    <WindowScript window="MainWin"><![CDATA[
//查询用户列表
event queryUser_btn_click(Button thisComp, Ext.EventObject e)
{

}

event addUser_btn_click(Button thisComp, Ext.EventObject e)
{
 
  var win = new Window1();
  win.show();
}

event editUser_btn_click(Button thisComp, Ext.EventObject e)
{
  var win = new Window2();
  var counts = Grid1.getSelectionModel().getSelections().length;
  if(counts!= 1)
  {
    Ext.Msg.alert('提示', '请选择一条用户记录');
    return;
  }
  win.show();
}





event Button22_click(Button thisComp, Ext.EventObject e)
{
  FormPanel1.getForm().reset();
}


event Button1_click(Button thisComp, Ext.EventObject e) {
	var win = new Window3();
  var counts = Grid1.getSelectionModel().getSelections().length;
  if(counts!= 1)
  {
    Ext.Msg.alert('提示', '请选择一条用户记录');
    return;
  }
  win.show();
}
]]></WindowScript>
    <WindowScript window="Window1"><![CDATA[remote bizframe.authority.user._userService as uService;

event Window1_complete() {
     if("true"==MainWin.extID_visible.toLowerCase()){
        UserJobNum.setVisible(true);
        UserJobNum.setEnabled(true);
        UserJobNum.setLabel(MainWin.extID_text);
        UserJobNum.fieldName=MainWin.extID_fieldName;
        
        // 读取配置文件的配置项，为UI属性项设值。
        UserJobNum.regex=top.userManageMw.uiExtUserID_validate;// 设置字段验证的正则表达式。
        UserJobNum.regexText=top.userManageMw.uiExtUserID_validateText;// 设置字段验证失败后的提示信息。
        
     }
     addOrgName.setValue(MainWin.tOrgName);
     addOrgName.defaultValue=MainWin.tOrgName;
     addOrgId.setValue(MainWin.tOrgId);
     addOrgId.defaultValue=MainWin.tOrgId;
     //searchDepCode.setEnabled(false);
}

event Button5_click(Button thisComp, Ext.EventObject e) {
	if(FormPanel2.getForm().isValid()){
		var authWin = new auth(MainWin).window;
		authWin.needAuth(authWin,'bizSetUser','bizUserAdd',MainWin, function(){
			var _values=FormPanel2.getValues();
			Ext.apply(_values,{resCode:"bizSetUser",opCode:"bizUserAdd"});
			Ext.apply(_values,{userStatus : UIUserStatus.getValue()});
			var response = uService.synExecute(_values);
			if(!(response.returnCode == 0)){
				Ext.Msg.alert('错误',response.errorInfo);
			}else{
				Ext.Msg.alert('提示','新增用户成功',
					function(){
						
						var _userId=UIUserId.getValue();
						var _orgName=addOrgName.getValue();
						var _orgId=addOrgId.getValue();
						var _uIUserStatus=UIUserStatus.getValue();
						
						MainWin.FormPanel1.getForm().reset();			
						//新增后查询该机构下所有的用户记录			
						//MainWin.TextField2.setValue(_userId);
						MainWin.searchOrgName.setValue(_orgName);
						MainWin.searchOrgId.setValue(_orgId);
						MainWin.DictComboBox1.setValue(_uIUserStatus);
						
						var _param=MainWin.FormPanel1.getValues();
						MainWin.DataSet1.setParams(_param);
						MainWin.Grid1.refresh();
						//var param = {};
						//Ext.apply(param,{userId:_userId});					
						//Ext.apply(param,{resCode:'bizSetUser'});
						//Ext.apply(param,{opCode:'bizSetUserFind'});
						//MainWin.DataSet1.clearParams();
						//MainWin.DataSet1.setParams(param);
						//MainWin.DataSet1.load();
						//FormPanel2.getForm().reset();
						close();		
					}
				);
			}
		});
	}
	else
		Ext.Msg.alert('错误',"发现有输入项不符合规范!");
}
event Button7_click(Button thisComp, Ext.EventObject e) {
	FormPanel2.getForm().reset();
	addOrgId.setValue(addOrgId.defaultValue);
}
event Button6_click(Button thisComp, Ext.EventObject e) {
	FormPanel2.getForm().reset();
	close();
}
event Button8_click(Button thisComp, Ext.EventObject e) {
	if(FormPanel2.getForm().isValid()){
		var authWin = new auth(MainWin).window;
		authWin.needAuth(authWin,'bizSetUser','bizUserAdd',MainWin, function(){
			var _values=FormPanel2.getValues();
			Ext.apply(_values,{resCode:"bizSetUser",opCode:"bizUserAdd"});
			Ext.apply(_values,{userStatus : UIUserStatus.getValue()});
			var response = uService.synExecute(_values);
			if(!(response.returnCode == 0)){
				Ext.Msg.alert('错误',response.errorInfo);
			}else{
				Ext.Msg.alert('提示','新增用户成功',
					function(){
						//MainWin.Grid1.refresh();
						var _userId=UIUserId.getValue();
						var _orgName=addOrgName.getValue();
						var _orgId=addOrgId.getValue();
						
						MainWin.FormPanel1.getForm().reset();						
						MainWin.TextField2.setValue(_userId);
						MainWin.searchOrgName.setValue(_orgName);
						MainWin.searchOrgId.setValue(_orgId);

						var _param=MainWin.FormPanel1.getValues();
						MainWin.DataSet1.setParams(_param);
						//MainWin.Grid1.refresh();
						//var param = {};
						//Ext.apply(param,{userId:_userId});					
						
						//Ext.apply(param,{resCode:'bizSetUser'});
						//Ext.apply(param,{opCode:'bizSetUserFind'});
						//MainWin.DataSet1.clearParams();
						
						//MainWin.DataSet1.setParams(param);
						MainWin.DataSet1.load();
						UIUserId.setValue('');
						UIUserName.setValue('');
						UIRemark.setValue('');
					}
				);
			}
		});
	}
	else
		Ext.Msg.alert('错误',"发现有输入项不符合规范!");
}

event searchDepCode_triggerclick(Hs.HsTargetSelect thisComp) {
	if(searchBranchCode.getValue()!=''){
		return true;
	}
	
	Ext.Msg.alert('提示','选择部门前请先选择一个机构')
	return false;
}

]]></WindowScript>
    <WindowScript window="Window2"><![CDATA[remote bizframe.authority.user._userService as uService;
event Button9_click(Button thisComp, Ext.EventObject e) {
	if(FormPanel3.getForm().isValid()){
	var authWin = new auth(MainWin).window;
		authWin.needAuth(authWin,'bizSetUser','bizUserModfiy',MainWin, function(){
			//var _values=FormPanel2.getValues();
			//Ext.apply(_values,{resCode:"bizSetUser",opCode:"bizUserModfiy"});
			//Ext.apply(_values,{userStatus : UIUserStatus.getValue(), lockStatus : UILockStatus.getValue()});
			var values=FormPanel3.getValues();
			Ext.apply(values,{resCode:"bizSetUser",opCode:"bizUserModfiy"});
			
			var response = uService.synExecute(values);
			if(!(response.returnCode == 0)){
				Ext.Msg.alert('错误',response.errorInfo);
			}else{
				Ext.Msg.alert('提示','修改用户成功',
					function(){
					
						//MainWin.Grid1.clear();
						MainWin.Grid1.refresh();
							
					 /*
					 var _param=	MainWin.DataSet1.getParams();
					 var _limit=MainWin.Grid1.getLimit();
				     var _start=MainWin.Grid1.getStart();
				     Ext.apply(_param,{start :_start});
				     Ext.apply(_param,{limit :_limit});
					 MainWin.DataSet1.load();
					 */
					 close();					
					}
				);
			}
		});
	
	/*
		
		var authWin = new auth(MainWin).window;
		authWin.needAuth(authWin,'bizSetUser','bizUserModfiy',MainWin, function(){
		var values=FormPanel3.getValues();
		Ext.apply(values,{resCode:"bizSetUser",opCode:"bizUserModfiy"});
		FormPanel3.commSubmit(values);
		
		});
		*/
	}
	else
		Ext.Msg.alert('错误',"发现有输入项不符合规范!");
}
event Button10_click(Button thisComp, Ext.EventObject e) {
	close();
}
event Window2_complete() {
	
    if("true"==MainWin.extID_visible.toLowerCase()){
        UserJobNum.setVisible(true);
        UserJobNum.setEnabled(true);
        UserJobNum.setLabel(MainWin.extID_text);
        UserJobNum.fieldName=MainWin.extID_fieldName;
        
        // 读取配置文件的配置项，为UI属性项设值。
        UserJobNum.regex=top.userManageMw.uiExtUserID_validate;// 设置字段验证的正则表达式。
        UserJobNum.regexText=top.userManageMw.uiExtUserID_validateText;// 设置字段验证失败后的提示信息。
    }
    var record = MainWin.Grid1.getSelectionModel().getSelected();
    UIUserId.setValue(record.get('user_id'));
	UIUserId.defaultValue=record.get('user_id');
	
	UserJobNum.setValue(record.get('ext_field_1'));
	UserJobNum.defaultValue=record.get('ext_field_1');
	
    UIUserName.setValue(record.get('user_name'));
	UIUserName.defaultValue=record.get('user_name');
	
	addOrgName.setValue(record.get('org_name'));
	addOrgName.defaultValue=record.get('org_name');
	
	addOrgId.setValue(record.get('org_id'));
	addOrgId.defaultValue=record.get('org_id');
	
	UIUserType.setValue(record.get('user_type'));
	UIUserType.defaultValue=record.get('user_type');
	
	UIUserStatus.setValue(record.get('user_status'));
	UIUserStatus.defaultValue=record.get('user_status');
	
	UIUserOrder.setValue(record.get('user_order'));
	UIUserOrder.defaultValue=record.get('user_order');
	
	/**
	UILockStatus.setValue(record.get('lock_status'));
	UILockStatus.defaultValue=record.get('lock_status');*/
	
	UIRemark.setValue(record.get('remark'));
	UIRemark.defaultValue=record.get('remark');
	
	/**20111111 huhl@hundsun.com  用用户昵称登陆   bengin**/
	if(top.BIZ_USER_LOGIN_NAME && "user_name"==top.BIZ_USER_LOGIN_NAME){
		UIUserName.setEditable(false);
	}
	/**20111111 huhl@hundsun.com  用用户昵称登陆   end **/
}

event Button7_click(Button thisComp, Ext.EventObject e) {
     FormPanel3.getForm().reset();
}
]]></WindowScript>
    <WindowScript window="Window3"><![CDATA[]]></WindowScript>
  </WindowScripts>
</hsdoc>
